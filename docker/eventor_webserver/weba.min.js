!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.weba=e()}}(function(){return function e(t,i,r){function o(a,s){if(!i[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(n)return n(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return o(i?i:e)},u,u.exports,e,t,i,r)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,i){var r=e("./UrlDecoder"),o=function(){function e(e){this.element=e,this.read()}return e.prototype.read=function(){var e,t;e=new r.UrlDecoder(this.element.src),t=e.getParams(),this.domain=e.getDomain(),this.trackerId=t.trackerId},e}();i.ConfigImpl=o},{"./UrlDecoder":2}],2:[function(e,t,i){var r=function(){function e(e){this.url=e}return e.prototype.getDomain=function(){return"//"+this.url.split("/")[2]},e.prototype.getParams=function(){var e,t=this.getQueryParams(this.url),i={};if(!t)return i;for(var r=this.splitParams(t),o=0;o<r.length;o++)e=r[o].split("="),i[e[0]]=e[1];return i},e.prototype.getQueryParams=function(e){return e.replace(/^[^\?]+\??/,"")},e.prototype.splitParams=function(e){return e.split("&")},e}();i.UrlDecoder=r},{}],3:[function(e,t,i){var r=function(){function e(){}return e}();i.Device=r},{}],4:[function(e,t,i){var r=e("./../Device"),o=function(){function e(e,t,i,o,n,a,s,c,d,u,l,h,v,p){this.device=new r.Device,this.screenSizeDetector=e,this.windowSizeDetector=t,this.localStorageDetector=i,this.sessionStorageDetector=o,this.adBlockDetector=n,this.pdfDetector=a,this.canvasDetector=s,this.flashDetector=c,this.silverlightDetetor=d,this.cookieDetector=u,this.touchDetector=l,this.quickTimeDetector=h,this.javaDetector=v,this.realPlayerDetector=p}return e.prototype.buildWidth=function(){this.device.width=this.windowSizeDetector.getWidth()},e.prototype.buildHeight=function(){this.device.height=this.windowSizeDetector.getHeight()},e.prototype.buildAvailableWidth=function(){this.device.availableWidth=this.screenSizeDetector.getAvailableWidth()},e.prototype.buildAvailableHeight=function(){this.device.availableHeight=this.screenSizeDetector.getAvailableHeight()},e.prototype.buildIsLocalStorage=function(){this.device.isLocalStorage=this.localStorageDetector.isLocalStorage()},e.prototype.buildIsSessionStorage=function(){this.device.isSessionStorage=this.sessionStorageDetector.isSessionStorage()},e.prototype.buildIsAdBlock=function(){this.device.isAdBlock=this.adBlockDetector.isAdBlock()},e.prototype.buildIsJavascript=function(){this.device.isJavascript=!0},e.prototype.buildIsPdf=function(){this.device.isPdf=this.pdfDetector.isPdf()},e.prototype.buildIsCanvas=function(){this.device.isCanvas=this.canvasDetector.isCanvas()},e.prototype.buildIsFlash=function(){this.device.isFlash=this.flashDetector.isFlash()},e.prototype.buildIsSilverlight=function(){this.device.isSilverlight=this.silverlightDetetor.isSilverlight()},e.prototype.buildIsCookie=function(){this.device.isCookie=this.cookieDetector.isCookie()},e.prototype.buildIsTouch=function(){this.device.isTouch=this.touchDetector.isTouch()},e.prototype.buildIsQuickTime=function(){this.device.isQuickTime=this.quickTimeDetector.isQuickTime()},e.prototype.buildIsJava=function(){this.device.isJava=this.javaDetector.isJava()},e.prototype.buildIsRealPlayer=function(){this.device.isRealPlayer=this.realPlayerDetector.isRealPlayer()},e.prototype.getDevice=function(){return this.device},e}();i.DeviceBuilderImpl=o},{"./../Device":3}],5:[function(e,t,i){var r="\n    pub_300x250\n    pub_300x250m\n    pub_728x90\n    text-ad\n    textAd\n    text_ad\n    text_ads\n    text-ads\n    text-ad-links\n",o="\n    width: 1px !important;\n    height: 1px !important;\n    position: absolute !important;\n    left: -10000px !important;\n    top: -1000px !important;\n",n=function(){function e(e){this.window=e}return e.prototype.isAdBlock=function(){var e=!1;if(this.createBait(),this.detectAdBlock()&&(e=!0),void 0!==this.window.getComputedStyle&&!e){var t=this.window.getComputedStyle(this.bait,null);this.isHideByAdBlock(t)&&(e=!0)}return this.destroyBait(),e},e.prototype.createBait=function(){var e=this.window.document.createElement("div");e.setAttribute("class",r),e.setAttribute("style",o),this.bait=this.window.document.body.appendChild(e),this.bait.offsetParent=void 0,this.bait.offsetHeight=void 0,this.bait.offsetLeft=void 0,this.bait.offsetTop=void 0,this.bait.offsetWidth=void 0,this.bait.clientHeight=void 0,this.bait.clientWidth=void 0},e.prototype.destroyBait=function(){this.window.document.body.removeChild(this.bait)},e.prototype.detectAdBlock=function(){return null!==this.window.document.body.getAttribute("abp")||null===this.bait.offsetParent||0===this.bait.offsetHeight||0===this.bait.offsetLeft||0===this.bait.offsetTop||0===this.bait.offsetWidth||0===this.bait.clientHeight||0===this.bait.clientWidth},e.prototype.isHideByAdBlock=function(e){return e&&("none"===e.getPropertyValue("display")||"hidden"===e.getPropertyValue("visibility"))},e}();i.AdBlockDetector=n},{}],6:[function(e,t,i){var r=function(){function e(e){this.global=e}return e.prototype.isCanvas=function(){var e=this.global.document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},e}();i.CanvasDetector=r},{}],7:[function(e,t,i){var r="weba_test",o=function(){function e(e,t){this.document=e,this.navigator=t}return e.prototype.isCookie=function(){var e=this.navigator.cookieEnabled;return"undefined"!=typeof e&&e||(this.document.cookie=r,e=-1!==this.document.cookie.indexOf(r),this.deleteCookie(r)),e},e.prototype.deleteCookie=function(e){this.document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},e}();i.CookieDetector=o},{}],8:[function(e,t,i){var r="ShockwaveFlash.ShockwaveFlash",o="Shockwave Flash",n=function(){function e(e,t){this.window=e,this.navigator=t}return e.prototype.isFlash=function(){return void 0===this.navigator.plugins||0===this.navigator.plugins.length?!(!this.window.hasOwnProperty("ActiveXObject")||!new this.window.ActiveXObject(r)):void 0!==this.navigator.plugins[o]},e}();i.FlashDetector=n},{}],9:[function(e,t,i){var r="javaEnabled",o=function(){function e(e){this.navigator=e}return e.prototype.isJava=function(){var e=!1;return this.hasJavaEnabledMethod()&&(e=this.navigator.javaEnabled()),e},e.prototype.hasJavaEnabledMethod=function(){return this.navigator.hasOwnProperty(r)&&"function"==typeof this.navigator[r]},e}();i.JavaDetector=o},{}],10:[function(e,t,i){var r=function(){function e(e){this.localStorage=e}return e.prototype.isLocalStorage=function(){var e="weba_localstorage_test";try{return this.localStorage.setItem(e,!0),this.localStorage.removeItem(e),!0}catch(t){return!1}},e}();i.LocalStorageDetector=r},{}],11:[function(e,t,i){var r=["Adobe Acrobat","Chrome PDF Viewer","WebKit built-in PDF"],o=function(){function e(e,t){this.window=e,this.navigator=t}return e.prototype.isPdf=function(){var e=this.canCreateActiveXObject("AcroPDF.PDF")||this.canCreateActiveXObject("PDF.PdfCtrl");if(!e)for(var t=r.length,i=0;t>i;i++)if(this.hasNavigatorPlugin(r[i])){e=!0;break}return e},e.prototype.canCreateActiveXObject=function(e){try{var t=this.window.ActiveXObject(e);return void 0!==t}catch(i){return!1}},e.prototype.hasNavigatorPlugin=function(e){if(this.navigator.plugins)for(var t in this.navigator.plugins)if(this.detectName(t,e))return!0;return!1},e.prototype.detectName=function(e,t){return this.navigator.plugins.hasOwnProperty(e)&&this.navigator.plugins[e].hasOwnProperty("name")&&this.navigator.plugins[e].name.indexOf(t)>-1},e}();i.PdfDetector=o},{}],12:[function(e,t,i){var r="QuickTime",o=function(){function e(e){this.navigator=e}return e.prototype.isQuickTime=function(){var e=!1;return this.hasNavigatorPlugin(r)&&(e=!0),this.detectByOS()&&(e=!0),e},e.prototype.hasNavigatorPlugin=function(e){if(this.navigator.plugins)for(var t in this.navigator.plugins)if(this.detectName(t,e))return!0;return!1},e.prototype.detectName=function(e,t){return this.navigator.plugins.hasOwnProperty(e)&&this.navigator.plugins[e].hasOwnProperty("name")&&this.navigator.plugins[e].name.indexOf(t)>-1},e.prototype.detectByOS=function(){return this.navigator.appVersion.indexOf("Mac")>0&&"Microsoft"===this.navigator.appName.substring(0,9)&&parseInt(this.navigator.appVersion,10)<5},e}();i.QuickTimeDetector=o},{}],13:[function(e,t,i){var r=["RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (32-bit)","RealPlayer(tm) G2 LiveConnect-Enabled Plug-In (64-bit)","RealPlayer Plugin"],o=["rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer"],n=function(){function e(e,t){this.navigator=t,this.window=e}return e.prototype.isRealPlayer=function(){for(var e=!1,t=o.length,i=0;t>i;i++)if(this.canCreateActiveXObject(o[i])){e=!0;break}if(!e)for(var n=r.length,a=0;n>a;a++)if(this.hasNavigatorPlugin(r[a])){e=!0;break}return e},e.prototype.canCreateActiveXObject=function(e){try{var t=this.window.ActiveXObject(e);return void 0!==t}catch(i){return!1}},e.prototype.hasNavigatorPlugin=function(e){if(this.navigator.plugins)for(var t in this.navigator.plugins)if(this.detectName(t,e))return!0;return!1},e.prototype.detectName=function(e,t){return this.navigator.plugins.hasOwnProperty(e)&&this.navigator.plugins[e].hasOwnProperty("name")&&this.navigator.plugins[e].name.indexOf(t)>-1},e}();i.RealPlayerDetector=n},{}],14:[function(e,t,i){var r=function(){function e(e){this.global=e}return e.prototype.getAvailableWidth=function(){return this.global.screen.width},e.prototype.getAvailableHeight=function(){return this.global.screen.height},e}();i.ScreenSizeDetector=r},{}],15:[function(e,t,i){var r=function(){function e(e){this.sessionStorage=e}return e.prototype.isSessionStorage=function(){var e="weba_sessionstorage_test";try{return this.sessionStorage.setItem(e,!0),this.sessionStorage.removeItem(e),!0}catch(t){return!1}},e}();i.SessionStorageDetector=r},{}],16:[function(e,t,i){var r="Silverlight Plug-In",o=function(){function e(e,t){this.window=e,this.navigator=t}return e.prototype.isSilverlight=function(){var e=!1;try{var t=!1;try{e=!!this.navigator.plugins[r],e||(t=!0)}catch(i){t=!0}if(t){var o=new this.window.ActiveXObject("AgControl.AgControl");e=!!o}}finally{return e}},e}();i.SilverlightDetector=o},{}],17:[function(e,t,i){var r="touchstart",o=function(){function e(e,t){this.window=e,this.navigator=t}return e.prototype.isTouch=function(){return r in this.window||!!this.navigator.msMaxTouchPoints},e}();i.TouchDetector=o},{}],18:[function(e,t,i){var r=function(){function e(e){this.global=e}return e.prototype.getWidth=function(){return this.global.document.documentElement.clientWidth},e.prototype.getHeight=function(){return this.global.document.documentElement.clientHeight},e}();i.WindowSizeDetector=r},{}],19:[function(e,t,i){var r=function(){function e(e){this.deviceBuilder=e}return e.prototype.buildDevice=function(){this.deviceBuilder.buildHeight(),this.deviceBuilder.buildWidth(),this.deviceBuilder.buildAvailableHeight(),this.deviceBuilder.buildAvailableWidth(),this.deviceBuilder.buildIsLocalStorage(),this.deviceBuilder.buildIsSessionStorage(),this.deviceBuilder.buildIsAdBlock(),this.deviceBuilder.buildIsJavascript(),this.deviceBuilder.buildIsPdf(),this.deviceBuilder.buildIsCanvas(),this.deviceBuilder.buildIsFlash(),this.deviceBuilder.buildIsSilverlight(),this.deviceBuilder.buildIsCookie(),this.deviceBuilder.buildIsTouch(),this.deviceBuilder.buildIsQuickTime(),this.deviceBuilder.buildIsJava(),this.deviceBuilder.buildIsRealPlayer()},e.prototype.getDevice=function(){return this.deviceBuilder.getDevice()},e}();i.DeviceDirector=r},{}],20:[function(e,t,i){var r=function(){function e(e,t,i){this.parametersDirector=e,this.requestHandler=t,this.parametersNormalizer=i}return e.prototype.handle=function(e){for(var t=e.length,i=0;t>i;i++)this.parametersDirector.buildParameters(e[i]),this.normalizedParameters=this.parametersNormalizer.normalize(this.parametersDirector.getParameters()),this.requestHandler.handle(this.normalizedParameters)},e}();i.EventHandler=r},{}],21:[function(e,t,i){var r=function(){function e(e,t,i){this.config=e,this.global=t,this.deviceDirector=i}return e.prototype.buildDevice=function(){this.deviceDirector.buildDevice(),this.parameters=this.deviceDirector.getDevice()},e.prototype.buildTrackerId=function(){this.parameters.trackerId=this.config.trackerId},e.prototype.buildUrl=function(){this.parameters.url=encodeURIComponent(this.global.location.href)},e.prototype.buildEvent=function(e){this.parameters.event=e.event},e.prototype.buildDate=function(e){this.parameters.date=encodeURIComponent(e.date)},e.prototype.getParameters=function(){return this.parameters},e}();i.ParametersBuilderImpl=r},{}],22:[function(e,t,i){var r=function(){function e(e){this.parametersBuilder=e}return e.prototype.buildParameters=function(e){this.parametersBuilder.buildDevice(),this.parametersBuilder.buildTrackerId(),this.parametersBuilder.buildEvent(e),this.parametersBuilder.buildDate(e),this.parametersBuilder.buildUrl()},e.prototype.getParameters=function(){return this.parametersBuilder.getParameters()},e}();i.ParametersDirector=r},{}],23:[function(e,t,i){var r=function(){function e(){}return e.prototype.initEmpty=function(){return this.w=0,this.h=0,this.aw=0,this.ah=0,this.t="",this.e="",this.u="",this.rd="",this.d1=!1,this.d2=!1,this.d3=!0,this.d4=!1,this.d5=!1,this.d6=!1,this.d7=!1,this.d8=!1,this.d9=!1,this.d11=!1,this.d12=!1,this.d13=!1,this.d14=!1,this},e}();i.NormalizedParameters=r},{}],24:[function(e,t,i){var r=e("./NormalizedParameters"),o=function(){function e(){this.normalizedParameters=new r.NormalizedParameters}return e.prototype.normalize=function(e){return this.normalizedParameters.h=e.height,this.normalizedParameters.w=e.width,this.normalizedParameters.aw=e.availableWidth,this.normalizedParameters.ah=e.availableHeight,this.normalizedParameters.t=e.trackerId,this.normalizedParameters.e=e.event,this.normalizedParameters.u=e.url,this.normalizedParameters.rd=e.date,this.normalizedParameters.d1=e.isTouch,this.normalizedParameters.d2=e.isCookie,this.normalizedParameters.d3=e.isJavascript,this.normalizedParameters.d4=e.isFlash,this.normalizedParameters.d5=e.isPdf,this.normalizedParameters.d6=e.isJava,this.normalizedParameters.d7=e.isQuickTime,this.normalizedParameters.d8=e.isRealPlayer,this.normalizedParameters.d9=e.isSilverlight,this.normalizedParameters.d11=e.isSessionStorage,this.normalizedParameters.d12=e.isLocalStorage,this.normalizedParameters.d13=e.isCanvas,this.normalizedParameters.d14=e.isAdBlock,this.normalizedParameters},e}();i.ParametersNormalizer=o},{"./NormalizedParameters":23}],25:[function(e,t,i){var r=e("../../parameters/normalizer/NormalizedParameters"),o=function(){function e(){}return e.prototype.buildQueryString=function(e){var t=(new r.NormalizedParameters).initEmpty(),i=[];for(var o in e)e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&i.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));this.queryString=i.join("&")},e.prototype.getQueryString=function(){return this.queryString},e}();i.QueryStringBuilder=o},{"../../parameters/normalizer/NormalizedParameters":23}],26:[function(e,t,i){var r=function(){function e(e,t,i){this.queryStringBuilder=e,this.config=t,this.request=i}return e.prototype.handle=function(e){this.queryStringBuilder.buildQueryString(e),this.request.send(this.config.domain,this.queryStringBuilder.getQueryString())},e}();i.RequestHandler=r},{}],27:[function(e,t,i){var r=2040,o=function(){function e(){}return e.prototype.send=function(e,t,i){var o;try{o=new XMLHttpRequest}catch(n){o=new ActiveXObject("Microsoft.XMLHTTP")}o?(o.onreadystatechange=function(){4===o.readyState&&404===o.status&&console.log("offline tracking")},this.totalLengthOfUrl(e,t)<r?this.getRequest(o,e,t):this.setRequest(o,e,t)):this.pixel(e,t)},e.prototype.getRequest=function(e,t,i){e.open("GET",t+"?"+i,!0),e.send(void 0)},e.prototype.setRequest=function(e,t,i){e.open("SET",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(i)},e.prototype.pixel=function(e,t){var i=new Image;i.src=e+"?"+t},e.prototype.totalLengthOfUrl=function(e,t){return e.length+t.length},e}();i.Ajax=o},{}],28:[function(e,t,i){var r,o,n,a,s,c,d,u,l,h,v,p,f,g,m,y,b,D,P,w,S,k,B,z,I,C,A,T=e("./event/handler/EventHandler"),x=e("./parameters/director/ParametersDirector"),R=e("./request/handler/RequestHandler"),O=e("./parameters/normalizer/ParametersNormalizer"),q=e("./parameters/builder/ParametersBuilderImpl"),H=e("./config/ConfigImpl"),L=e("./device/director/DeviceDirector"),N=e("./device/builder/DeviceBuilderImpl"),E=e("./device/detectors/ScreenSize/ScreenSizeDetector"),Q=e("./device/detectors/WindowSize/WindowSizeDetector"),W=e("./queryString/builder/QueryStringBuilder"),j=e("./request/types/Ajax"),F=e("./device/detectors/LocalStorage/LocalStorageDetector"),J=e("./device/detectors/SessionStorage/SessionStorageDetector"),X=e("./device/detectors/AdBlock/AdBlockDetector"),U=e("./device/detectors/Pdf/PdfDetector"),_=e("./device/detectors/Canvas/CanvasDetector"),M=e("./device/detectors/Flash/FlashDetector"),V=e("./device/detectors/Silverlight/SilverlightDetector"),G=e("./device/detectors/Cookie/CookieDetector"),K=e("./device/detectors/Touch/TouchDetector"),Y=e("./device/detectors/QuickTime/QuickTimeDetector"),Z=e("./device/detectors/Java/JavaDetector"),$=e("./device/detectors/RealPlayer/RealPlayerDetector"),ee={event:"pageview",date:(new Date).toISOString()},te=300;n=[],r=window,r.dataLayer=r.dataLayer||[],o=r.dataLayer.push;var ie=document.getElementsByTagName("script"),re=ie[0];s=new H.ConfigImpl(re),b=new O.ParametersNormalizer,g=new W.QueryStringBuilder,m=new j.Ajax,y=new R.RequestHandler(g,s,m),D=new X.AdBlockDetector(r),P=new U.PdfDetector(r,navigator),w=new _.CanvasDetector(r),c=new E.ScreenSizeDetector(r),d=new Q.WindowSizeDetector(r),u=new F.LocalStorageDetector(localStorage),l=new J.SessionStorageDetector(sessionStorage),S=new M.FlashDetector(r,navigator),k=new V.SilverlightDetector(r,navigator),B=new G.CookieDetector(document,navigator),z=new K.TouchDetector(r,navigator),I=new Y.QuickTimeDetector(navigator),C=new Z.JavaDetector(navigator),A=new $.RealPlayerDetector(r,navigator),h=new N.DeviceBuilderImpl(c,d,u,l,D,P,w,S,k,B,z,I,C,A),v=new L.DeviceDirector(h),f=new q.ParametersBuilderImpl(s,r,v),p=new x.ParametersDirector(f),a=new T.EventHandler(p,y,b),r.dataLayer.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(o.apply(r.dataLayer,Array.prototype.slice.call(e,0)),n.push.apply(n,e);r.dataLayer.length>te;)r.dataLayer.shift();a.handle(e)},r.dataLayer.push(ee)},{"./config/ConfigImpl":1,"./device/builder/DeviceBuilderImpl":4,"./device/detectors/AdBlock/AdBlockDetector":5,"./device/detectors/Canvas/CanvasDetector":6,"./device/detectors/Cookie/CookieDetector":7,"./device/detectors/Flash/FlashDetector":8,"./device/detectors/Java/JavaDetector":9,"./device/detectors/LocalStorage/LocalStorageDetector":10,"./device/detectors/Pdf/PdfDetector":11,"./device/detectors/QuickTime/QuickTimeDetector":12,"./device/detectors/RealPlayer/RealPlayerDetector":13,"./device/detectors/ScreenSize/ScreenSizeDetector":14,"./device/detectors/SessionStorage/SessionStorageDetector":15,"./device/detectors/Silverlight/SilverlightDetector":16,"./device/detectors/Touch/TouchDetector":17,"./device/detectors/WindowSize/WindowSizeDetector":18,"./device/director/DeviceDirector":19,"./event/handler/EventHandler":20,"./parameters/builder/ParametersBuilderImpl":21,"./parameters/director/ParametersDirector":22,"./parameters/normalizer/ParametersNormalizer":24,"./queryString/builder/QueryStringBuilder":25,"./request/handler/RequestHandler":26,"./request/types/Ajax":27}]},{},[28])(28)});